version: '3'
services:
  report-app:
    image: hubidu27/report-app:latest
    ports:
      - 4000:4000
    links:
      - report-service
    volumes:
      - /data/e2e-reports:/opt/app/reports
      - /etc/timezone:/etc/timezone
      - /etc/localtime:/etc/localtime

  report-importer:
    image: hubidu27/report-importer:latest
    links:
      - mongodb
    volumes:
      - /etc/timezone:/etc/timezone
      - /etc/localtime:/etc/localtime
      - /data/e2e-reports:/go/src/app/reports
      
  report-service:
    image: hubidu27/report-service:latest
    ports:
      - 8001:8000
    links:
      - mongodb
    volumes:
      - /etc/timezone:/etc/timezone
      - /etc/localtime:/etc/localtime
          
  mongodb:
    image: mongo:3.0
    command: mongod --smallfiles --quiet --logpath=/dev/null
    volumes:
      - /etc/timezone:/etc/timezone
      - /etc/localtime:/etc/localtime
      - /data/db:/data/db
      - /data/configdb:/data/configdb
